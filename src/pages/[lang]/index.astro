---
import Layout from '../../layouts/Layout.astro'; // Pozor na cestu ../..
import Gallery from '../../components/Gallery.astro';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';

// TOTO PŘIDAT DO KAŽDÉHO SOUBORU:
export function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'cs' } },
  ];
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<Layout title="Roman Wantulok | Photography">

  <main class="w-full overflow-x-hidden">
    
    <section class="relative h-screen w-full flex items-center justify-center overflow-hidden">
      
      <div class="absolute inset-0 z-0">
        <div class="absolute inset-0 bg-black/40 z-10"></div> 
        <img 
          src="/../assets/images/chalhero.webp"
          alt="Hero Background" 
          class="w-full h-full object-cover opacity-60 animate-slow-zoom" 
        />
      </div>

      <div class="relative z-20 text-center px-4 max-w-5xl mx-auto py-10 mix-blend-screen">
        
        <h2 class="text-gold text-xs md:text-sm uppercase tracking-[0.3em] mb-12 opacity-0 animate-fade-in-up" style="animation-delay: 0.5s">
          {t('home.est')}
        </h2>
        
        <div class="relative z-20 mb-12 h-24 md:h-auto flex items-center justify-center">
            <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[80%] h-[60%] bg-gold/25 blur-[70px] rounded-full opacity-0 animate-fade-in" style="animation-delay: 0.5s;"></div>
            <div class="relative z-10 animate-brush opacity-0" style="animation-delay: 0.8s;">
                <div class="relative inline-block">
                    <img 
                        src="/assets/images/logovelke.svg" 
                        alt="Roman Wantulok" 
                        class="relative z-10 w-[280px] md:w-[700px] h-auto object-contain drop-shadow-[0_4px_15px_rgba(0,0,0,0.6)]" 
                    />
                    <div class="absolute inset-0 z-20 w-full h-full pointer-events-none"
                         style="-webkit-mask-image: url('/assets/images/logovelke.svg'); -webkit-mask-size: contain; -webkit-mask-repeat: no-repeat; -webkit-mask-position: center; mask-image: url('/assets/images/logovelke.svg'); mask-size: contain; mask-repeat: no-repeat; mask-position: center;">
                         <div class="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/50 to-transparent -translate-x-full animate-shine"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <p class="text-platinum/80 max-w-lg mx-auto font-sans font-light text-sm md:text-base tracking-wide opacity-0 animate-fade-in-up" style="animation-delay: 1.2s">
          {t('home.subtitle')}<br/>
          {t('home.desc')}
        </p>

      </div>

      <div class="absolute bottom-10 left-1/2 -translate-x-1/2 opacity-0 animate-fade-in" style="animation-delay: 2.5s">
        <div class="w-[1px] h-16 bg-gradient-to-b from-gold to-transparent"></div>
      </div>

    </section>

    <section class="py-28 bg-obsidian text-center px-6 relative z-10 border-b border-white/5">
      <div class="max-w-2xl mx-auto">
            <p class="text-platinum font-sans font-light text-lg leading-relaxed mb-8">
                {t('home.quote')}
            </p>
            <div class="text-gold font-serif italic text-3xl">
                Roman Wantulok
            </div>
        </div>
    </section>

    <section class="flex flex-col md:flex-row h-[80vh] w-full overflow-hidden bg-obsidian">
      <a href={`/${lang}/portfolio?filter=Automotive`} class="group relative flex-1 h-full overflow-hidden border-r border-white/5 transition-[flex] duration-700 ease-out hover:flex-[1.5] cursor-none">
        <div class="absolute inset-0 bg-black/20 z-10 group-hover:bg-transparent transition-colors duration-500"></div>
        <img src="/../assets/images/porsche.webp" class="absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110 opacity-60 group-hover:opacity-100" />
        <div class="absolute inset-0 flex flex-col items-center justify-center z-20 pointer-events-none">
          <h2 class="text-4xl md:text-6xl font-serif text-platinum italic group-hover:text-gold transition-colors duration-300">{t('home.automotive')}</h2>
          <span class="mt-4 text-xs uppercase tracking-widest text-white/50 group-hover:text-white opacity-0 group-hover:opacity-100 transition-all duration-500 translate-y-4 group-hover:translate-y-0">{t('home.explore')}</span>
        </div>
      </a>

      <a href={`/${lang}/portfolio?filter=Weddings`} class="group relative flex-1 h-full overflow-hidden transition-[flex] duration-700 ease-out hover:flex-[1.5] cursor-none">
        <div class="absolute inset-0 bg-black/20 z-10 group-hover:bg-transparent transition-colors duration-500"></div>
        <img src="/../assets/images/svatba.webp" class="absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-110 opacity-60 group-hover:opacity-100" />
        <div class="absolute inset-0 flex flex-col items-center justify-center z-20 pointer-events-none">
          <h2 class="text-4xl md:text-6xl font-serif text-platinum italic group-hover:text-gold transition-colors duration-300">{t('home.stories')}</h2>
          <span class="mt-4 text-xs uppercase tracking-widest text-white/50 group-hover:text-white opacity-0 group-hover:opacity-100 transition-all duration-500 translate-y-4 group-hover:translate-y-0">{t('home.explore')}</span>
        </div>
      </a>
    </section>

    <div class="bg-obsidian pt-24 pb-12 text-center">
      <h3 class="text-gold uppercase tracking-widest text-xs mb-2">{t('home.selected')}</h3>
      <h2 class="text-3xl font-serif text-platinum">{t('home.journal')}</h2>
    </div>
    
    <Gallery />

  </main>
</Layout>

<script>
  window.addEventListener('load', () => {
    // Prodlouženo na 3800ms pro pomalejší načtení úvodu
    setTimeout(() => {
        document.body.classList.add('page-loaded');
    }, 2700); 
  });
</script>

<style is:global>
  body:not(.page-loaded) .animate-fade-in-up,
  body:not(.page-loaded) .animate-fade-in,
  body:not(.page-loaded) .animate-brush,
  body:not(.page-loaded) .animate-shine,
  body:not(.page-loaded) .animate-slow-zoom {
    animation-play-state: paused !important;
    opacity: 0; 
  }
</style>