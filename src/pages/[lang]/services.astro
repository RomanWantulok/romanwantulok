---
import Layout from '../../layouts/Layout.astro';
import { getLangFromUrl, useTranslations } from '../../i18n/utils';

export function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'cs' } },
  ];
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<Layout title={`Services & Pricing | Roman Wantulok`}>

  <section class="pt-48 pb-16 px-6 text-center bg-obsidian">
    <h1 class="text-5xl md:text-7xl font-serif text-platinum mb-6">
      {t('services.title')}
    </h1>
    <p class="text-platinum/50 max-w-lg mx-auto text-sm tracking-wide font-light" set:html={t('services.desc')}>
    </p>
  </section>

  <section class="sticky top-0 z-40 bg-obsidian/95 backdrop-blur-sm border-b border-white/5 py-6 transition-all duration-300">
    <div class="flex justify-center gap-8 md:gap-12 max-w-6xl mx-auto px-4">
      <button class="category-btn text-platinum/50 border-b border-transparent pb-1 text-xs md:text-sm uppercase tracking-[0.2em] hover:text-gold transition-all cursor-pointer" data-target="automotive">
        {t('services.cat_auto')}
      </button>
      <button class="category-btn text-platinum/50 border-b border-transparent pb-1 text-xs md:text-sm uppercase tracking-[0.2em] hover:text-gold transition-all cursor-pointer" data-target="weddings">
        {t('services.cat_wed')}
      </button>
      <button class="category-btn text-platinum/50 border-b border-transparent pb-1 text-xs md:text-sm uppercase tracking-[0.2em] hover:text-gold transition-all cursor-pointer" data-target="events">
        {t('services.cat_evt')}
      </button>
    </div>
  </section>

  <section class="pt-12 pb-32 px-4 md:px-12 bg-obsidian min-h-[60vh]">
    <div class="max-w-6xl mx-auto relative">
      
      <div id="automotive" class="service-section block opacity-100 transition-all duration-500 ease-in-out">
        <div class="text-center mb-16">
            <h2 class="text-3xl font-serif text-white">{t('services.auto_title')}</h2>
            <p class="text-platinum/40 text-sm mt-2">{t('services.auto_sub')}</p>
        </div>

        <div class="group border-b border-white/10 py-10 hover:bg-white/[0.02] transition-colors duration-300">
          <div class="flex flex-col md:flex-row items-center justify-between text-center md:text-left gap-8 max-w-6xl mx-auto px-4">
            <div class="w-full md:w-1/4">
              <h3 class="text-2xl font-serif text-platinum group-hover:text-gold transition-colors">{t('services.auto_basic')}</h3>
              <p class="text-platinum/40 text-xs mt-2 uppercase tracking-wider">{t('services.auto_basic_desc')}</p>
            </div>
            <div class="w-full md:w-2/4 border-t md:border-t-0 md:border-l md:border-r border-white/5 py-4 md:py-0 md:px-8">
              <ul class="flex flex-wrap justify-center gap-x-4 text-xs text-platinum/60 uppercase tracking-wider font-light">
                <li>• {t('services.auto_basic_li1')}</li>
                <li>• {t('services.auto_basic_li2')}</li>
                <li>• {t('services.auto_basic_li3')}</li>
                <li>• {t('services.auto_basic_li4')}</li>
              </ul>
            </div>
            <div class="w-full md:w-1/4 flex flex-col items-center md:items-end">
              <span class="block text-3xl font-serif text-white mb-4">2.000 CZK</span>
              <a href={`/${lang}/contact`} class="text-xs text-gold border-b border-gold/30 pb-1 hover:text-white hover:border-white transition-all uppercase tracking-widest">{t('services.book')}</a>
            </div>
          </div>
        </div>

        <div class="group relative border border-gold/30 bg-gold/[0.03] py-12 md:px-8 my-12 transform md:scale-105 shadow-2xl transition-transform duration-500 hover:scale-[1.07]">
          <div class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-gold text-black text-[10px] font-bold uppercase px-3 py-1 tracking-widest">{t('services.rec')}</div>
          <div class="flex flex-col md:flex-row items-center justify-between text-center md:text-left gap-8 max-w-6xl mx-auto px-4">
            <div class="w-full md:w-1/4">
              <h3 class="text-3xl font-serif text-white italic">{t('services.auto_full')}</h3>
              <p class="text-gold/80 text-xs mt-2 uppercase tracking-wider">{t('services.auto_full_desc')}</p>
            </div>
            <div class="w-full md:w-2/4 border-t md:border-t-0 md:border-l md:border-r border-white/10 py-6 md:py-0 md:px-8">
              <ul class="flex flex-wrap justify-center gap-x-4 text-xs text-platinum uppercase tracking-wider font-normal">
                <li>• {t('services.auto_full_li1')}</li>
                <li class="text-gold font-bold">• {t('services.auto_full_li2')}</li>
                <li>• {t('services.auto_full_li3')}</li>
                <li>• {t('services.auto_full_li4')}</li>
              </ul>
            </div>
            <div class="w-full md:w-1/4 flex flex-col items-center md:items-end">
              <span class="block text-4xl font-serif text-gold mb-4">4.000 CZK</span>
              <a href={`/${lang}/contact`} class="inline-block px-6 py-3 bg-gold text-black text-xs font-bold uppercase tracking-widest hover:bg-white transition-colors">{t('services.best')}</a>
            </div>
          </div>
        </div>

        <div class="group border-b border-white/10 py-10 hover:bg-white/[0.02] transition-colors duration-300">
          <div class="flex flex-col md:flex-row items-center justify-between text-center md:text-left gap-8 max-w-6xl mx-auto px-4">
            <div class="w-full md:w-1/4">
              <h3 class="text-2xl font-serif text-platinum group-hover:text-gold transition-colors">{t('services.auto_comm')}</h3>
              <p class="text-platinum/40 text-xs mt-2 uppercase tracking-wider">{t('services.auto_comm_desc')}</p>
            </div>
            <div class="w-full md:w-2/4 border-t md:border-t-0 md:border-l md:border-r border-white/5 py-4 md:py-0 md:px-8">
              <ul class="flex flex-wrap justify-center gap-x-4 text-xs text-platinum/60 uppercase tracking-wider font-light">
                <li>• {t('services.auto_comm_li1')}</li>
                <li>• {t('services.auto_comm_li2')}</li>
                <li>• {t('services.auto_comm_li3')}</li>
                <li>• {t('services.auto_comm_li4')}</li>
              </ul>
            </div>
            <div class="w-full md:w-1/4 flex flex-col items-center md:items-end">
              <span class="block text-2xl font-serif text-white mb-4">{t('services.price_custom')}</span>
              <a href={`/${lang}/contact`} class="text-xs text-platinum border-b border-white/30 pb-1 hover:text-gold hover:border-gold transition-all uppercase tracking-widest">{t('services.inquire')}</a>
            </div>
          </div>
        </div>
      </div>

      <div id="weddings" class="service-section hidden opacity-0 transition-all duration-500 ease-in-out">
        <div class="text-center mb-16">
             <h2 class="text-3xl font-serif text-white">{t('services.wed_title')}</h2>
             <p class="text-platinum/40 text-sm mt-2">{t('services.wed_sub')}</p>
        </div>
        <div class="group border-b border-white/10 py-16 hover:bg-white/[0.02] transition-colors duration-300">
          <div class="flex flex-col md:flex-row items-center justify-between text-center md:text-left gap-8 max-w-6xl mx-auto px-4">
            <div class="w-full md:w-1/4">
              <h3 class="text-2xl font-serif text-platinum group-hover:text-gold transition-colors">{t('services.wed_love')}</h3>
              <p class="text-platinum/40 text-xs mt-2 uppercase tracking-wider">{t('services.wed_love_desc')}</p>
            </div>
            <div class="w-full md:w-2/4 border-t md:border-t-0 md:border-l md:border-r border-white/5 py-4 md:py-0 md:px-8">
              <ul class="flex flex-wrap justify-center gap-x-4 text-xs text-platinum/60 uppercase tracking-wider font-light">
                <li>• {t('services.wed_love_li1')}</li>
                <li>• {t('services.wed_love_li2')}</li>
                <li>• {t('services.wed_love_li3')}</li>
                <li>• {t('services.wed_love_li4')}</li>
              </ul>
            </div>
            <div class="w-full md:w-1/4 flex flex-col items-center md:items-end">
              <span class="block text-3xl font-serif text-white mb-4">3.000 CZK</span>
              <a href={`/${lang}/contact`} class="text-xs text-gold border-b border-gold/30 pb-1 hover:text-white hover:border-white transition-all uppercase tracking-widest">{t('services.book')}</a>
            </div>
          </div>
        </div>
        <div class="group border-b border-white/10 py-16 hover:bg-white/[0.02] transition-colors duration-300">
          <div class="flex flex-col md:flex-row items-center justify-between text-center md:text-left gap-8 max-w-6xl mx-auto px-4">
            <div class="w-full md:w-1/4">
              <h3 class="text-2xl font-serif text-platinum group-hover:text-gold transition-colors">{t('services.wed_day')}</h3>
              <p class="text-platinum/40 text-xs mt-2 uppercase tracking-wider">{t('services.wed_day_desc')}</p>
            </div>
            <div class="w-full md:w-2/4 border-t md:border-t-0 md:border-l md:border-r border-white/5 py-4 md:py-0 md:px-8">
              <ul class="flex flex-wrap justify-center gap-x-4 text-xs text-platinum/60 uppercase tracking-wider font-light">
                <li>• {t('services.wed_day_li1')}</li>
                <li>• {t('services.wed_day_li2')}</li>
                <li>• {t('services.wed_day_li3')}</li>
              </ul>
            </div>
            <div class="w-full md:w-1/4 flex flex-col items-center md:items-end">
              <span class="block text-3xl font-serif text-white mb-4">od 8.000 CZK</span>
              <a href={`/${lang}/contact`} class="px-6 py-2 border border-gold text-gold text-xs uppercase tracking-widest hover:bg-gold hover:text-black transition-all">{t('services.check')}</a>
            </div>
          </div>
        </div>
      </div>

      <div id="events" class="service-section hidden opacity-0 transition-all duration-500 ease-in-out">
        <div class="text-center mb-16">
            <h2 class="text-3xl font-serif text-white">{t('services.evt_title')}</h2>
            <p class="text-platinum/40 text-sm mt-2">{t('services.evt_sub')}</p>
        </div>
        <div class="group border-b border-white/10 py-16 hover:bg-white/[0.02] transition-colors duration-300">
          <div class="flex flex-col md:flex-row items-center justify-between text-center md:text-left gap-8 max-w-6xl mx-auto px-4">
            <div class="w-full md:w-1/4">
              <h3 class="text-2xl font-serif text-platinum group-hover:text-gold transition-colors">{t('services.evt_club')}</h3>
              <p class="text-platinum/40 text-xs mt-2 uppercase tracking-wider">{t('services.evt_club_desc')}</p>
            </div>
            <div class="w-full md:w-2/4 border-t md:border-t-0 md:border-l md:border-r border-white/5 py-4 md:py-0 md:px-8">
              <ul class="flex flex-wrap justify-center gap-x-4 text-xs text-platinum/60 uppercase tracking-wider font-light">
                <li>• {t('services.evt_club_li1')}</li>
                <li>• {t('services.evt_club_li2')}</li>
                <li>• {t('services.evt_club_li3')}</li>
              </ul>
            </div>
            <div class="w-full md:w-1/4 flex flex-col items-center md:items-end">
              <span class="block text-2xl font-serif text-white mb-4">{t('services.price_custom')}</span>
              <a href={`/${lang}/contact`} class="text-xs text-platinum border-b border-white/30 pb-1 hover:text-gold hover:border-gold transition-all uppercase tracking-widest">{t('services.inquire')}</a>
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>

</Layout>

<script>
  function initServices() {
    const buttons = document.querySelectorAll('.category-btn');
    const sections = document.querySelectorAll('.service-section');

    function switchCategory(targetId: string) {
      // 1. Upravíme tlačítka
      buttons.forEach(btn => {
        btn.classList.remove('text-gold', 'border-gold');
        btn.classList.add('text-platinum/50', 'border-transparent');
      });
      const activeBtn = document.querySelector(`[data-target="${targetId}"]`);
      if(activeBtn) {
        activeBtn.classList.remove('text-platinum/50', 'border-transparent');
        activeBtn.classList.add('text-gold', 'border-gold');
      }

      // 2. Skryjeme vše s animací
      sections.forEach(sec => {
          sec.classList.add('opacity-0');
          setTimeout(() => {
              sec.classList.add('hidden');
              sec.classList.remove('block');
          }, 300);
      });

      // 3. Zobrazíme cílovou sekci
      setTimeout(() => {
        const targetSection = document.getElementById(targetId);
        if(targetSection) {
          targetSection.classList.remove('hidden');
          targetSection.classList.add('block');
          // Malý timeout pro spuštění opacity animace
          setTimeout(() => {
              targetSection.classList.remove('opacity-0');
              targetSection.classList.add('opacity-100');
          }, 50);
        }
      }, 350);
    }

    buttons.forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const target = btn.getAttribute('data-target');
        if (target) switchCategory(target);
      });
    });
  }

  // Spustit hned i po přenačtení (např. při změně jazyka)
  document.addEventListener('DOMContentLoaded', initServices);
  // Záloha pro případ rychlého načtení
  initServices();
</script>